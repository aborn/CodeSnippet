// .conkerorrc is conkeror configure file

require("new-tabs.js");    // shows tab like chrome web browser

// history style
url_completion_use_history = true;
define_browser_object_class(
    "history-url", null, 
    function (I, prompt) {
        check_buffer (I.buffer, content_buffer);
        var result = yield I.buffer.window.minibuffer.read_url(
            $prompt = prompt,  $use_webjumps = false, $use_history = true, $use_bookmarks = false);
        yield co_return (result);
    });

interactive("find-url-from-history",
            "Find a page from history in the current buffer",
            "find-url",
            $browser_object = browser_object_history_url);

interactive("find-url-from-history-new-buffer",
            "Find a page from history in the current buffer",
            "find-url-new-buffer",
            $browser_object = browser_object_history_url);

define_key(content_buffer_normal_keymap, "h", "find-url-from-history-new-buffer");
define_key(content_buffer_normal_keymap, "H", "find-url-from-history");
session_pref('browser.history_expire_days',7); // seting url history within 7 days

// hot-key setting
define_key(default_global_keymap, "\C-j", "switch-to-buffer");
define_key(default_global_keymap, "\M-j", "find-url-new-buffer");
define_key(default_global_keymap, "\C-m", "find-url");

// define M-m to go google buffer directory
//define_key(default_global_keymap, "\M-m", "find-url");

// To add a new web jump
//add_webjump("keyword", "url");
define_webjump("reddit", "http://www.reddit.com/search?q=%s");

// Configure mode-line (between minor-bar and content)
add_hook("mode_line_hook", mode_line_adder(downloads_status_widget));
load_paths.unshift("chrome://conkeror-contrib/content/");
require("mode-line-buttons.js");
mode_line_add_buttons(standard_mode_line_buttons, true);
add_hook("mode_line_hook", mode_line_adder(buffer_count_widget), true);
add_hook("mode_line_hook", mode_line_adder(loading_count_widget), true);